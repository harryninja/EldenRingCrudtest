<div ng-controller="postgreDbAppController" class="container mt-5">
    <table class="table table-striped">
        <thead>
            <tr>
                <th>Nome</th>
                <th>Data de Nascimento</th>
                <th>CPF</th>
                <th>Telefone</th>
                <th>Observações</th>
                <th>Ações</th>
            </tr>
        </thead>
        <tbody>
            <tr ng-repeat="person in persons">
                <td>{{person.pes_nome}}</td>
                <td>{{formatDate(person.pes_data_nascimento)}}</td>
                <td>{{person.pes_cpf}}</td>
                <td>{{person.pes_telefone}}</td>
                <td>{{person.pes_observacoes}}</td>
                <td>
                   <button ng-click="loadPerson(person.pes_id)" class="btn btn-primary">Editar</button>
                   <button ng-click="openModal(person.pes_id)" class="btn btn-info">Visualizar</button>
                   <button ng-click="deletePerson(person.pes_id)" class="btn btn-danger">Deletar</button>
                </td>
            </tr>
        </tbody>
    </table>

    <div id="myModal" class="modal fade" tabindex="-1" role="dialog">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Detalhes da Pessoa</h5>
                    <button type="button" class="close" ng-click="closeModal()" aria-label="Close">
                       <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <p><strong>Nome:</strong> {{person.pes_nome}}</p>
                    <p><strong>Data de Nascimento:</strong> {{formatDate(person.pes_data_nascimento)}}</p>
                    <p><strong>CPF:</strong> {{person.pes_cpf}}</p>
                    <p><strong>Telefone:</strong> {{person.pes_telefone}}</p>
                    <p><strong>Observações:</strong> {{person.pes_observacoes}}</p>
                    <p><strong>Profissão:</strong> {{person.profissao.prof_nome}}</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" ng-click="closeModal()">Fechar</button>
                </div>
            </div>
        </div>
     </div>

    <form ng-submit="savePerson()" class="mt-3">
        <div class="form-group">
            <label for="pes_nome">Nome</label>
            <input type="text" ng-model="person.pes_nome" placeholder="Nome" class="form-control">
        </div>
        <div class="form-group">
            <label for="pes_data_nascimento">Data de Nascimento</label>
            <input type="date" ng-model="person.pes_data_nascimento" ng-value="formatDateForInput(person.pes_data_nascimento)" placeholder="Data de Nascimento" class="form-control">
        </div>
        <div class="form-group">
            <label for="pes_cpf">CPF</label>
            <input type="text" ng-model="person.pes_cpf" placeholder="CPF" class="form-control">
        </div>
        <div class="form-group">
            <label for="pes_telefone">Telefone</label>
            <input type="text" ng-model="person.pes_telefone" placeholder="Telefone" class="form-control">
        </div>
        <div class="form-group">
            <label for="pes_observacoes">Observações</label>
            <input type="text" ng-model="person.pes_observacoes" placeholder="Observações" class="form-control">
        </div>
        <div class="form-group">
            <label for="pes_prof_id">Profissão</label>
            <select ng-model="person.pes_prof_id" ng-options="prof.prof_id as prof.prof_nome for prof in profs" class="form-control">
            </select>
        </div>
        <button type="submit" class="btn btn-success">Criar/Salvar</button>
    </form>
 </div>